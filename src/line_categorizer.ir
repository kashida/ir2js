:!SectionLine
  CodeLine|SeparatorLine|InvalidLine

::LineCategorizer
  @context\!context.Context\$

:create_line\SectionLine\
  line\input.Line\$
  parsed := new LineParser(line)
  if !parsed.is_valid
    => new InvalidLine(line)
  if parsed.is_separator
    => new SeparatorLine(line, parsed)
  => new CodeLine(@context, line, parsed)
