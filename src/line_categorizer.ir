:!SectionLine
  CodeLine|SeparatorLine|InvalidLine

:
  CODE_PARSER := null

::LineCategorizer
  @context\!Context\$

:create_line\SectionLine\
  input\InputLine\$
  CODE_PARSER = CODE_PARSER || new parser.ParseTarget('ParseLine')
  parsed := CODE_PARSER.run(input, true)
  if (!parsed.is_valid)
    => new InvalidLine(input)
  if (parsed.is_separator)
    => new SeparatorLine(input, parsed)
  => new CodeLine(@context, input, parsed)
